<script>
  import {onMount} from 'svelte'
  import {push} from 'svelte-spa-router'
  import QR from 'svelte-kjua'

  import FilesTable from './components/FilesTable.html'
  import account from './accountStore'

  var files = []
  onMount(async () => {
    files = await (await fetch('/~/list')).json()
  })

  function goToSeller(e) {
    e.preventDefault()
    push('/seller/' + $account.id)
  }
</script>

<div>
  <div>
    <button disabled="{!$account.id}" on:click="{goToSeller}">
      Sell file
    </button>
    {#if !$account.id}
    <small>
      Login first.
    </small>
    {/if}
  </div>
  <FilesTable files="{files}" />
</div>
